{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../sales-form/sales-form.component\";\nimport * as i4 from \"../sales-table/sales-table.component\";\nfunction DashboardComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-sales-form\", 9);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"existingData\", ctx_r0.selectedRow)(\"refresh\", ctx_r0.reload)(\"resetEdit\", ctx_r0.clearSelection);\n  }\n}\nfunction DashboardComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"app-sales-table\", 10);\n    i0.ɵɵlistener(\"editRequested\", function DashboardComponent_div_14_Template_app_sales_table_editRequested_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.editRow($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let DashboardComponent = /*#__PURE__*/(() => {\n  class DashboardComponent {\n    constructor(router) {\n      this.router = router;\n      this.showForm = false;\n      this.selectedRow = null;\n      this.userName = '';\n      this.clearSelection = () => {\n        this.selectedRow = null;\n        this.showForm = false;\n      };\n      this.reload = () => {\n        this.clearSelection();\n        setTimeout(() => this.showForm = false, 0); // force reload of table\n      };\n    }\n\n    ngOnInit() {\n      const storedUser = localStorage.getItem('userName');\n      if (!storedUser) {\n        // Redirect to login if not logged in\n        this.router.navigate(['/login']);\n      } else {\n        this.userName = storedUser;\n      }\n    }\n    editRow(row) {\n      this.selectedRow = row;\n      this.showForm = true;\n    }\n    // Called when \"Leads\" button is clicked (for adding new lead)\n    openLeadsForm() {\n      this.selectedRow = null;\n      this.showForm = true;\n    }\n    logout() {\n      localStorage.clear(); // remove login token / user\n      this.router.navigate(['/login']);\n    }\n    static {\n      this.ɵfac = function DashboardComponent_Factory(t) {\n        return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: DashboardComponent,\n        selectors: [[\"app-dashboard\"]],\n        decls: 15,\n        vars: 3,\n        consts: [[1, \"container-fluid\", \"bg-dark\", \"text-white\", \"p-3\", \"d-flex\", \"justify-content-between\", \"align-items-center\", \"sticky-top\", \"shadow\"], [1, \"m-0\"], [1, \"me-3\"], [1, \"btn\", \"btn-danger\", \"btn-sm\", 3, \"click\"], [1, \"container-fluid\", \"bg-black\", \"text-white\", \"py-4\", \"px-3\", \"min-vh-100\"], [1, \"mb-3\", \"d-flex\", \"flex-wrap\", \"gap-2\", \"justify-content-start\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"bi\", \"bi-plus-circle\"], [4, \"ngIf\"], [3, \"existingData\", \"refresh\", \"resetEdit\"], [3, \"editRequested\"]],\n        template: function DashboardComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h4\", 1);\n            i0.ɵɵtext(2, \"Sales Dashboard\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"div\")(4, \"span\", 2);\n            i0.ɵɵtext(5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"button\", 3);\n            i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_6_listener() {\n              return ctx.logout();\n            });\n            i0.ɵɵtext(7, \"Logout\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(8, \"div\", 4)(9, \"div\", 5)(10, \"button\", 6);\n            i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_10_listener() {\n              return ctx.openLeadsForm();\n            });\n            i0.ɵɵelement(11, \"i\", 7);\n            i0.ɵɵtext(12, \" Leads \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(13, DashboardComponent_div_13_Template, 2, 3, \"div\", 8);\n            i0.ɵɵtemplate(14, DashboardComponent_div_14_Template, 2, 0, \"div\", 8);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(5);\n            i0.ɵɵtextInterpolate1(\"Welcome, \", ctx.userName, \"\");\n            i0.ɵɵadvance(8);\n            i0.ɵɵproperty(\"ngIf\", ctx.showForm);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", !ctx.showForm);\n          }\n        },\n        dependencies: [i2.NgIf, i3.SalesFormComponent, i4.SalesTableComponent],\n        styles: [\"@media (max-width: 768px){.container-fluid[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0!important}}.sticky-top[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:80px}\"]\n      });\n    }\n  }\n  return DashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}