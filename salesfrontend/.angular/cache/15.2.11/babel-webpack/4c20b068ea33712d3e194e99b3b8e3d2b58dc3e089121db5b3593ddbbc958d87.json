{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../sales-form/sales-form.component\";\nimport * as i4 from \"../sales-table/sales-table.component\";\nfunction DashboardComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-sales-form\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"existingData\", ctx_r0.selectedRow)(\"refresh\", ctx_r0.reload)(\"resetEdit\", ctx_r0.clearSelection);\n  }\n}\nfunction DashboardComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"app-sales-table\", 11);\n    i0.ɵɵlistener(\"editRequested\", function DashboardComponent_div_16_Template_app_sales_table_editRequested_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.editRow($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let DashboardComponent = /*#__PURE__*/(() => {\n  class DashboardComponent {\n    constructor(router) {\n      this.router = router;\n      this.showForm = false;\n      this.selectedRow = null;\n      this.userName = '';\n      this.clearSelection = () => {\n        this.selectedRow = null;\n        this.showForm = false;\n      };\n      this.reload = () => {\n        this.clearSelection();\n        setTimeout(() => this.showForm = false, 0); // force reload of table\n      };\n    }\n\n    ngOnInit() {\n      const storedUser = localStorage.getItem('userName');\n      if (!storedUser) {\n        // Redirect to login if not logged in\n        this.router.navigate(['/login']);\n      } else {\n        this.userName = storedUser;\n      }\n    }\n    goHome() {\n      this.clearSelection(); // resets form and returns to table view\n    }\n\n    editRow(row) {\n      this.selectedRow = row;\n      this.showForm = true;\n    }\n    // Called when \"Leads\" button is clicked (for adding new lead)\n    openLeadsForm() {\n      this.selectedRow = null;\n      this.showForm = true;\n    }\n    logout() {\n      localStorage.clear(); // remove login token / user\n      this.router.navigate(['/login']);\n    }\n    static {\n      this.ɵfac = function DashboardComponent_Factory(t) {\n        return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: DashboardComponent,\n        selectors: [[\"app-dashboard\"]],\n        decls: 17,\n        vars: 3,\n        consts: [[1, \"container-fluid\", \"bg-dark\", \"text-white\", \"p-3\", \"d-flex\", \"justify-content-between\", \"align-items-center\", \"sticky-top\", \"shadow\"], [1, \"m-0\"], [1, \"d-flex\", \"align-items-center\", \"gap-2\"], [1, \"btn\", \"btn-outline-light\", \"btn-sm\", 3, \"click\"], [1, \"bi\", \"bi-plus-circle\"], [1, \"bi\", \"bi-house-door-fill\"], [1, \"mx-2\"], [1, \"btn\", \"btn-danger\", \"btn-sm\", 3, \"click\"], [1, \"container-fluid\", \"bg-black\", \"text-white\", \"py-4\", \"px-3\", \"min-vh-100\"], [4, \"ngIf\"], [3, \"existingData\", \"refresh\", \"resetEdit\"], [3, \"editRequested\"]],\n        template: function DashboardComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h4\", 1);\n            i0.ɵɵtext(2, \"Sales Dashboard\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"div\", 2)(4, \"button\", 3);\n            i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_4_listener() {\n              return ctx.openLeadsForm();\n            });\n            i0.ɵɵelement(5, \"i\", 4);\n            i0.ɵɵtext(6, \" Leads \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"button\", 3);\n            i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_7_listener() {\n              return ctx.goHome();\n            });\n            i0.ɵɵelement(8, \"i\", 5);\n            i0.ɵɵtext(9, \" Home \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(10, \"span\", 6);\n            i0.ɵɵtext(11);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"button\", 7);\n            i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_12_listener() {\n              return ctx.logout();\n            });\n            i0.ɵɵtext(13, \"Logout\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(14, \"div\", 8);\n            i0.ɵɵtemplate(15, DashboardComponent_div_15_Template, 2, 3, \"div\", 9);\n            i0.ɵɵtemplate(16, DashboardComponent_div_16_Template, 2, 0, \"div\", 9);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(11);\n            i0.ɵɵtextInterpolate1(\"Welcome, \", ctx.userName, \"\");\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", ctx.showForm);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", !ctx.showForm);\n          }\n        },\n        dependencies: [i2.NgIf, i3.SalesFormComponent, i4.SalesTableComponent],\n        styles: [\"@media (max-width: 8px){.container-fluid[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0!important}}.sticky-top[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:0}.btn-outline-light[_ngcontent-%COMP%]{border-color:#fff;color:#fff}.btn-outline-light[_ngcontent-%COMP%]:hover{background-color:#fff;color:#000}.btn-primary[_ngcontent-%COMP%]{background-color:transparent!important;border-color:#fff!important;color:#fff!important}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#fff!important;color:#000!important}\"]\n      });\n    }\n  }\n  return DashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}