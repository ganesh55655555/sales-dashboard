{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../sales.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction SalesTableComponent_option_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const opp_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(opp_r4);\n  }\n}\nfunction SalesTableComponent_option_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const stage_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(stage_r5);\n  }\n}\nfunction SalesTableComponent_th_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"titlecase\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const key_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", key_r6 === \"dealWon\" ? \"Deal Size (USD)\" : i0.ɵɵpipeBind1(2, 1, key_r6), \" \");\n  }\n}\nfunction SalesTableComponent_tr_53_td_6_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const key_r9 = i0.ɵɵnextContext().$implicit;\n    const row_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", row_r7[key_r9] ? \"$\" + row_r7[key_r9] : \"-\", \" \");\n  }\n}\nfunction SalesTableComponent_tr_53_td_6_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0);\n  }\n  if (rf & 2) {\n    const key_r9 = i0.ɵɵnextContext().$implicit;\n    const row_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵtextInterpolate(row_r7[key_r9]);\n  }\n}\nfunction SalesTableComponent_tr_53_td_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtemplate(1, SalesTableComponent_tr_53_td_6_span_1_Template, 2, 1, \"span\", 25);\n    i0.ɵɵtemplate(2, SalesTableComponent_tr_53_td_6_ng_template_2_Template, 1, 1, \"ng-template\", null, 26, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const key_r9 = ctx.$implicit;\n    const _r11 = i0.ɵɵreference(3);\n    i0.ɵɵattribute(\"data-label\", key_r9);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", key_r9 === \"dealWon\")(\"ngIfElse\", _r11);\n  }\n}\nfunction SalesTableComponent_tr_53_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 20)(2, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function SalesTableComponent_tr_53_Template_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r18);\n      const row_r7 = restoredCtx.$implicit;\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.edit(row_r7));\n    });\n    i0.ɵɵelement(3, \"i\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function SalesTableComponent_tr_53_Template_button_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r18);\n      const row_r7 = restoredCtx.$implicit;\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.delete(row_r7.id));\n    });\n    i0.ɵɵelement(5, \"i\", 24);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(6, SalesTableComponent_tr_53_td_6_Template, 4, 3, \"td\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.tableHeaders);\n  }\n}\nexport let SalesTableComponent = /*#__PURE__*/(() => {\n  class SalesTableComponent {\n    constructor(service) {\n      this.service = service;\n      this.editRequested = new EventEmitter();\n      this.sales = [];\n      this.filtered = [];\n      this.filter = '';\n      this.selectedOpportunity = '';\n      this.selectedSalesStage = '';\n      this.fromDate = '';\n      this.toDate = '';\n      this.opportunityList = ['AWS', 'AWS - New Account', 'AWS BILL MIGRATE', 'AWS Direct to Our Billing', 'GCP - New Account', 'GWS - New Account', 'GWS - Direct to Our Billing', 'M365', 'M365 - New Account', 'Windows 11 pro', 'Azure', 'Cyber Security'];\n      this.salesStageList = ['1) Lead (Initial Requirement / Gathering)', '2) Qualification', '3) proposal', '4) Negotiation', '5) Closed Own (Converted)', '6) Closed Lost'];\n      this.tableHeaders = [];\n    }\n    ngOnInit() {\n      this.load();\n    }\n    load() {\n      this.service.getAll().subscribe(data => {\n        this.sales = data;\n        this.filtered = data;\n        // Dynamically determine headers except `id`\n        this.tableHeaders = data.length ? Object.keys(data[0]).filter(k => k !== 'id') : [];\n        // Ensure 'dealWon' is included\n        if (!this.tableHeaders.includes('dealWon')) {\n          this.tableHeaders.push('dealWon');\n        }\n        this.applyFilter();\n      });\n    }\n    delete(id) {\n      this.service.delete(id).subscribe(() => this.load());\n    }\n    applyFilter() {\n      this.filtered = this.sales.filter(s => {\n        const matchesText = JSON.stringify(s).toLowerCase().includes(this.filter.toLowerCase());\n        const matchesOpportunity = this.selectedOpportunity ? s.opportunity === this.selectedOpportunity : true;\n        const matchesSalesStage = this.selectedSalesStage ? s.salesStage === this.selectedSalesStage : true;\n        const recordDate = s.nextFollowUpDate?.substring(0, 10);\n        const matchesFromDate = this.fromDate ? recordDate >= this.fromDate : true;\n        const matchesToDate = this.toDate ? recordDate <= this.toDate : true;\n        return matchesText && matchesOpportunity && matchesSalesStage && matchesFromDate && matchesToDate;\n      });\n    }\n    edit(row) {\n      this.editRequested.emit(row);\n    }\n    clearFilters() {\n      this.filter = '';\n      this.selectedOpportunity = '';\n      this.selectedSalesStage = '';\n      this.fromDate = '';\n      this.toDate = '';\n      this.applyFilter();\n    }\n    static {\n      this.ɵfac = function SalesTableComponent_Factory(t) {\n        return new (t || SalesTableComponent)(i0.ɵɵdirectiveInject(i1.SalesService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: SalesTableComponent,\n        selectors: [[\"app-sales-table\"]],\n        outputs: {\n          editRequested: \"editRequested\"\n        },\n        decls: 54,\n        vars: 9,\n        consts: [[1, \"bg-black\", \"min-vh-100\", \"py-4\", \"px-2\", \"px-md-3\", \"text-light\"], [1, \"container-fluid\"], [1, \"mb-4\", \"d-flex\", \"flex-wrap\", \"align-items-end\", \"gap-3\", \"justify-content-start\"], [1, \"custom-form-group\"], [1, \"custom-input-wrapper\"], [1, \"bi\", \"bi-bullseye\", \"icon\"], [1, \"custom-input\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"value\", \"\"], [4, \"ngFor\", \"ngForOf\"], [1, \"bi\", \"bi-flag\", \"icon\"], [1, \"bi\", \"bi-search\", \"icon\"], [\"type\", \"text\", \"placeholder\", \"Search\", 1, \"custom-input\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [1, \"bi\", \"bi-calendar-check\", \"icon\"], [\"type\", \"date\", 1, \"custom-input\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [1, \"bi\", \"bi-calendar-date\", \"icon\"], [1, \"btn\", \"btn-outline-warning\", \"w-100\", 3, \"click\"], [1, \"bi\", \"bi-x-circle\"], [1, \"table-responsive\"], [1, \"table\", \"table-hover\", \"table-bordered\", \"align-middle\", \"text-center\", \"table-dark\", \"table-striped\"], [1, \"bg-gradient\"], [\"data-label\", \"Actions\"], [1, \"btn\", \"btn-sm\", \"btn-outline-info\", \"me-1\", 3, \"click\"], [1, \"bi\", \"bi-pencil-square\"], [1, \"btn\", \"btn-sm\", \"btn-outline-danger\", 3, \"click\"], [1, \"bi\", \"bi-trash\"], [4, \"ngIf\", \"ngIfElse\"], [\"normalCell\", \"\"]],\n        template: function SalesTableComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"label\");\n            i0.ɵɵtext(5, \"Opportunity\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"div\", 4);\n            i0.ɵɵelement(7, \"i\", 5);\n            i0.ɵɵelementStart(8, \"select\", 6);\n            i0.ɵɵlistener(\"ngModelChange\", function SalesTableComponent_Template_select_ngModelChange_8_listener($event) {\n              return ctx.selectedOpportunity = $event;\n            })(\"change\", function SalesTableComponent_Template_select_change_8_listener() {\n              return ctx.applyFilter();\n            });\n            i0.ɵɵelementStart(9, \"option\", 7);\n            i0.ɵɵtext(10, \"All Opportunities\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(11, SalesTableComponent_option_11_Template, 2, 1, \"option\", 8);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(12, \"div\", 3)(13, \"label\");\n            i0.ɵɵtext(14, \"Sales Stage\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"div\", 4);\n            i0.ɵɵelement(16, \"i\", 9);\n            i0.ɵɵelementStart(17, \"select\", 6);\n            i0.ɵɵlistener(\"ngModelChange\", function SalesTableComponent_Template_select_ngModelChange_17_listener($event) {\n              return ctx.selectedSalesStage = $event;\n            })(\"change\", function SalesTableComponent_Template_select_change_17_listener() {\n              return ctx.applyFilter();\n            });\n            i0.ɵɵelementStart(18, \"option\", 7);\n            i0.ɵɵtext(19, \"All Sales\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(20, SalesTableComponent_option_20_Template, 2, 1, \"option\", 8);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(21, \"div\", 3)(22, \"label\");\n            i0.ɵɵtext(23, \"Search\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(24, \"div\", 4);\n            i0.ɵɵelement(25, \"i\", 10);\n            i0.ɵɵelementStart(26, \"input\", 11);\n            i0.ɵɵlistener(\"ngModelChange\", function SalesTableComponent_Template_input_ngModelChange_26_listener($event) {\n              return ctx.filter = $event;\n            })(\"input\", function SalesTableComponent_Template_input_input_26_listener() {\n              return ctx.applyFilter();\n            });\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(27, \"div\", 3)(28, \"label\");\n            i0.ɵɵtext(29, \"From Date\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(30, \"div\", 4);\n            i0.ɵɵelement(31, \"i\", 12);\n            i0.ɵɵelementStart(32, \"input\", 13);\n            i0.ɵɵlistener(\"ngModelChange\", function SalesTableComponent_Template_input_ngModelChange_32_listener($event) {\n              return ctx.fromDate = $event;\n            })(\"change\", function SalesTableComponent_Template_input_change_32_listener() {\n              return ctx.applyFilter();\n            });\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(33, \"div\", 3)(34, \"label\");\n            i0.ɵɵtext(35, \"To Date\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(36, \"div\", 4);\n            i0.ɵɵelement(37, \"i\", 14);\n            i0.ɵɵelementStart(38, \"input\", 13);\n            i0.ɵɵlistener(\"ngModelChange\", function SalesTableComponent_Template_input_ngModelChange_38_listener($event) {\n              return ctx.toDate = $event;\n            })(\"change\", function SalesTableComponent_Template_input_change_38_listener() {\n              return ctx.applyFilter();\n            });\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(39, \"div\", 3)(40, \"label\");\n            i0.ɵɵtext(41, \"\\u00A0\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(42, \"button\", 15);\n            i0.ɵɵlistener(\"click\", function SalesTableComponent_Template_button_click_42_listener() {\n              return ctx.clearFilters();\n            });\n            i0.ɵɵelement(43, \"i\", 16);\n            i0.ɵɵtext(44, \" Clear Filters \");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(45, \"div\", 17)(46, \"table\", 18)(47, \"thead\", 19)(48, \"tr\")(49, \"th\");\n            i0.ɵɵtext(50, \"Actions\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(51, SalesTableComponent_th_51_Template, 3, 3, \"th\", 8);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(52, \"tbody\");\n            i0.ɵɵtemplate(53, SalesTableComponent_tr_53_Template, 7, 1, \"tr\", 8);\n            i0.ɵɵelementEnd()()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(8);\n            i0.ɵɵproperty(\"ngModel\", ctx.selectedOpportunity);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngForOf\", ctx.opportunityList);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngModel\", ctx.selectedSalesStage);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngForOf\", ctx.salesStageList);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngModel\", ctx.filter);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngModel\", ctx.fromDate);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngModel\", ctx.toDate);\n            i0.ɵɵadvance(13);\n            i0.ɵɵproperty(\"ngForOf\", ctx.tableHeaders);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngForOf\", ctx.filtered);\n          }\n        },\n        dependencies: [i2.NgForOf, i2.NgIf, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgModel, i2.TitleCasePipe],\n        styles: [\".custom-form-group[_ngcontent-%COMP%]{position:relative;margin-bottom:1.2rem}.custom-form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:-.6rem;left:1.2rem;font-size:.85rem;background-color:#1c1c1c;padding:0 6px;color:#f1f1f1;z-index:1}.custom-input-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.45rem .75rem;border:1px solid #ccc;border-radius:6px;background-color:#1c1c1c}.custom-input-wrapper[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#07c5f0;font-size:1.1rem;margin-right:.6rem}.custom-input[_ngcontent-%COMP%]{flex:1;background:transparent;border:none;color:#223d44;font-size:.95rem}.custom-input[_ngcontent-%COMP%]:focus{outline:none}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{filter:invert(1);cursor:pointer}.table[_ngcontent-%COMP%]{font-size:.9rem;vertical-align:middle}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{white-space:nowrap}@media (max-width: 768px){.custom-input[_ngcontent-%COMP%]{font-size:.8rem;padding:.3rem}.table[_ngcontent-%COMP%]{font-size:.75rem}.btn[_ngcontent-%COMP%]{font-size:.75rem;padding:.25rem .5rem}}@media (min-width: 768px){.custom-input[_ngcontent-%COMP%]{min-width:160px}input[type=date][_ngcontent-%COMP%]{min-width:140px}}.btn-outline-warning[_ngcontent-%COMP%]{color:#ffc107;border-color:#ffc107}.btn-outline-warning[_ngcontent-%COMP%]:hover{background-color:#ffc107;color:#000}\"]\n      });\n    }\n  }\n  return SalesTableComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}